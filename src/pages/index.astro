---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";
import Chart from "../components/Chart.astro";
import penguins from "../data/penguins.json";
import * as Plot from "@observablehq/plot";

const penguinScatter = {
	title: "Penguins — Flipper length vs Body mass",
	marks: [
		Plot.dot(penguins, {
			x: "flipper_length_mm",
			y: "body_mass_g",
			r: 3,
			stroke: "species",
			tip: true,
		}),
		Plot.linearRegressionY(penguins, {
			x: "flipper_length_mm",
			y: "body_mass_g",
			stroke: "species",
		}),
	],
	x: { label: "Flipper length (mm)" },
	y: { label: "Body mass (g)" },
	marginLeft: 60,
	marginBottom: 40,
};
---

<Layout title="Plot + Astro — Penguins">
	<section class="space-y-6">
		<header class="space-y-2">
			<h1 class="text-2xl md:text-3xl font-semibold tracking-tight">
				Observable Plot + Astro
			</h1>
			<p class="text-slate-600 dark:text-slate-400">
				Exemple principal rendu côté serveur (SVG statique).
			</p>
		</header>

		<article
			class="bg-white/80 dark:bg-zinc-900 rounded-2xl shadow-lg ring-1 ring-black/5 p-6"
		>
			<h2 class="text-lg font-medium mb-3">
				Penguins — Scatter + Régression
			</h2>
			<div
				class="border border-slate-200 dark:border-zinc-800 rounded-xl overflow-hidden bg-white dark:bg-zinc-950 p-3"
			>
				<Chart options={penguinScatter} class="chart" />
			</div>
			<p class="mt-3 text-sm text-slate-500">
				Données : flipper_length_mm vs body_mass_g. Couleur par espèce.
			</p>
		</article>

		<div class="pt-2">
			<a
				href="/examples"
				class="inline-flex items-center gap-2 text-sm font-medium text-emerald-700 hover:underline"
			>
				Voir d’autres exemples →
			</a>
		</div>
	</section>

	<style>
		.chart svg {
			max-width: 100%;
			height: auto;
		}
	</style>
</Layout>
